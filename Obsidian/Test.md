- 每条边有一个长度为 $n$ 的二进制串
- 当且仅当二进制串完全相同时，两条边可以同时删去
- 对 $n$ 位二进制串的第 $i$ 位随机生成一个权重 $w_i$
- 令 $n$ 位二进制串的哈希值 $h(s)=\bigoplus_{i=1}^n [s_i='1']\cdot w_i$
- 令 $h_i=h(s_i)$，其中 $s_i$ 代表第 $i$ 条边对应的二进制串，即其在每一对关系 $a_i,b_i$ 内外的情况

- 对每一对关系 $a_i,b_i$ 区间 $[a_i,b_i)$ 内的边的权重异或 $w_i$
	- 每次修改 $[a_i,b_i)$，对区间内的所有 $h_j$ 异或 $w_i$
- 输出 $h_1,\dots,h_n$
$\newcommand{\pr}[2]{\color{blue}{#1}/\color{red}{#2}}$




2 & \pr{0}{\bf 5} & $\pr{\bf 5}{0}$ & $\pr{0}{0}$ & $\pr{0}{0}$ \\
3 & $\pr{0}{5}$ & $\pr{5}{0}$ & $\pr{0}{0}$ & $\pr{0}{0}$ \\
4 & $\pr{0}{\bf 7}$ & $\pr{\bf 7}{0}$ & $\pr{0}{0}$ & $\pr{0}{0}$ \\
5 & $\pr{0}{7}$ & $\pr{7}{\bf 7}$ & $\pr{\bf 7}{0}$ & $\pr{0}{0}$ \\
6 & $\pr{0}{\bf 5}$ & $\pr{\bf 5}{0}$ & $\pr{0}{0}$ & $\pr{0}{0}$ \\