---
link: "[23HDU10D](http://acm.hdu.edu.cn/showproblem.php?pid=7386)"
done: true
tags:
  - probability
---

在随机过程中，一共有下列四种可能的状态：
1. $x-1$, $x$ 和 $x+1$ 都没有被猜过。
2. $x-1$ 和 $x+1$ 的其中之一被猜过，且 $x$ 没有被猜过。
3. $x-1$ 和 $x+1$ 都被猜过。
4. $x$ 被猜过。

我们令上述四种状态到可以确定 $x$ 的期望猜测次数分别为 $E_1$, $E_2$, $E_3$, $E_4$，我们有：
- $E_3=E_4=0$。
- $\displaystyle E_2=1+(1/n)\cdot E_3+(1/n)\cdot E_4+(1-2/n)\cdot E_2$，因为每次猜测有 $1/n$ 的概率猜到 $x-1$ 和 $x+1$ 的其中一个，有 $1/n$ 的概率猜到 $x$，否则不产生变化。此时，我们有 $2E_2=n+E_3+E_4$, $E_2=n/2$。
- $\displaystyle E_2=1+(1/n)\cdot E_3+(1/n)\cdot E_4+(1-2/n)\cdot E_2$，因为每次猜测 $1/n$ 的概率猜到 $x-1$ 和 $x+1$ 的另一个，有 $1/n$ 的概率猜到 $x$，否则不产生变化。此时，我们有 $3E_1=n+2E_2+E_4$, $E_1=2n/3$。

对于所有可能的 $x$，我们有：
1. 对于 $x=1$ 或 $x=n$，其初始状态为 2。
2. 对于 $2\le x\le n-1$，其初始状态为 1。

因此，如果 $x\neq 1$，则答案为 $\displaystyle \frac{2\cdot (n/2)+(n-2)\cdot (2n/3)}{n}=\frac{2n-1}{3}$，否则答案为 $0$。