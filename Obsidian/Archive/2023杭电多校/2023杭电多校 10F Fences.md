---
link: "[23HDU10F](http://acm.hdu.edu.cn/showproblem.php?pid=7388)"
done: true
tags:
  - Geometry
---

我们可以先求出所有点的凸包。如果入口 $O$ 在凸包上，那么答案就是凸包的周长。否则，答案一定有以下两条性质：
1. 答案是一个简单多边形，如果有边自交则一定可以在交点处将答案重构为简单多边形。
2. 答案只在 $O$ 点为凹，否则可以将该凹点弹出使周长更小。

根据以上两条性质，可以证明一定存在一条从 $O$ 出发的射线 $OP$，其与答案没有交点。我们尝试枚举 $OP$，假设 $OP$ 与凸包交在边 $AB$ 上，则答案由以下三段折线组成：
1. $O$ 到 $A$ 的凸壳，其内部有 $\triangle AOB$ 中在 $OP$ 与 $A$ 同侧的点。
2. 凸包上 $A$ 到 $B$ 的部分。
3. $O$ 到 $B$ 的凸壳，其内部有 $\triangle AOB$ 中在 $OP$ 与 $B$ 同侧的点。
其中折线 2 即为凸包长度减去 $AB$ 长度，而对所有可能的 $OP$，折线 1, 3 都可以分别从顺逆时针方向用单调栈预处理。

因此，我们可以枚举 $OP$ 所有可能的角度，答案即为所有角度中周长的最小值。