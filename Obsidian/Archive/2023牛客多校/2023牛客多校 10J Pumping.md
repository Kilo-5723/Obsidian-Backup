---
Link: "[23NC10J](https://ac.nowcoder.com/acm/contest/57364/J)"
done: true
tags:
  - Connectivity
---

如果答案存在，则图中一定存在一个结点 $u$，其中：
- $u$ 在一个环上。
- $u$ 可以被 $1$ 到达。
- $u$ 可以到达接受态，记为 $T$。

另外，对于任何满足上述条件的 $u$，我们都可以构造出满足题目要求的字符串，其包括从 $1$ 到 $u$ 的路径，从 $u$ 出发回到 $u$ 的一个环，以及从 $u$ 到达 $T$ 的路径。

因此，我们首先将 $1$ 可到达且可到达 $T$ 的子图提取出来并记为 $G'$。接下来，我们对 $G'$ 做强连通分量分解。如果 $G'$ 中不存在起点终点处于同一个强连通分量的边，则 $G'$ 中不存在环，答案不存在。否则，我们记这条边为 $(u,v)$，用 $x\to y$ 表示图中一条从 $x$ 到 $y$ 的路径，则 $1\to u\to v\to u\to T$ 是一条满足要求的路径。